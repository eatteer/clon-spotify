<main class="max-w-5xl mx-auto p-4">
  @if (user$ | async; as user) {
  <p class="font-bold text-4xl">Welcome, {{ user.displayName }}!</p>

  @if (playlists$ | async; as playlists) {
  <h2 class="font-bold text-2xl my-4">Your playlists</h2>

  <ul class="flex flex-col lg:grid lg:grid-cols-4 gap-4">
    @for (playlist of playlists; track playlist.id) {
    <li>
      <a [href]="playlist.playlistUrl" target="_blank">
        <div
          class="flex lg:flex-col lg:p-2 gap-4 hover:bg-accent rounded transition-all"
        >
          <img
            [src]="playlist.images[0]"
            [alt]="playlist.name"
            class="size-16 lg:w-full lg:h-full lg:aspect-square rounded object-cover"
          />
          <div>
            <p class="font-bold line-clamp-1">{{ playlist.name }}</p>
            <p class="line-clamp-1">{{ playlist.totalTracks }} tracks</p>
          </div>
        </div>
      </a>
    </li>
    } @empty {
    <div class="p-4">
      <p class="font-bold text-4xl mb-4">You don't seem to have any albums</p>
    </div>
    }
  </ul>
  }
  <!--  -->
  } @else {
  <p class="font-bold text-4xl mb-4">Sign in with your Spotify account</p>
  <p class="text-2xl mb-4">
    To see your playlists or search for an artist to start discovering their
    music
  </p>
  <app-sign-in-button variant="primary" />
  }

  <!--  -->
  @if ((isUserLoading() || isPlaylistsLoading())) {
  <div class="flex items-center justify-center p-8">
    <div
      class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent"
    ></div>
  </div>
  }

  <!--  -->
  @if (userError()) {
  <div class="text-destructive mb-4" role="alert">
    <p>{{ userError() }}</p>
  </div>
  }

  <!--  -->
  @if (playlistsError()) {
  <div class="text-destructive mb-4" role="alert">
    <p>{{ playlistsError() }}</p>
  </div>
  }
</main>
